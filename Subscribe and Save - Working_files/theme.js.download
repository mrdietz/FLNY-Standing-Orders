function toggleClass(e,t){document.getElementById(e).classList.toggle(t)}function toggleMobileMenu(e,t){var r=document.getElementById(t),a=e.target;r.classList.toggle("show"),r.classList.contains("show")?(a.classList.remove("fa-bars"),a.classList.add("fa-times")):(a.classList.remove("fa-times"),a.classList.add("fa-bars"))}function refreshCart(e,t){var r=$("[data-view=cart-items]");e&&(r.addClass("is-loading"),r.html('<div><i class="fa fa-spinner fa-spin"></i></div>')),$.ajax({url:"/cart/slider?layout=ajax&cart-items=true",success:function(e){refreshShippingCalculator(),r.removeClass("is-loading"),r.html(e),scrollCartSliderToBottom(),t&&document.getElementById(t).focus()},error:function(e){r.addClass("is-loading"),r.html("<div>Error Fetching Cart</div>")}})}function refreshCartSummary(e){var t=$(".cart-slider .cart-slider__container .cart-slider__summary");e&&(t.addClass("is-loading"),t.html('<div><i class="fa fa-spinner fa-spin"></i></div>')),$.ajax({url:"/cart/slider?layout=ajax&summary=true",success:function(e){t.removeClass("is-loading"),t.html(e)},error:function(e){t.addClass("is-loading"),t.html("<div>Error Fetching Cart</div>")}})}function refreshShippingCalculator(){var e=$("[data-view=free-shipping-calculator]");$.ajax({url:"/cart/slider?layout=ajax&free-shipping-calculator=true",success:function(t){e.html(t)},error:function(t){e.html("<div>Error Fetching Data</div>")}})}function refreshCartFees(e){var t=$(".cart-slider .cart-slider__container .cart-slider__fees");e&&(t.addClass("is-loading"),t.html('<div><i class="fa fa-spinner fa-spin"></i></div>')),$.ajax({url:"/cart/slider?layout=ajax&fees=true",success:function(e){t.removeClass("is-loading"),t.html(e)},error:function(e){t.addClass("is-loading"),t.html("<div>Error Fetching Cart Fees</div>")}})}function showCartSlider(e){0!==$(".cart-slider").length&&(e?($(".cart-slider").addClass("cart-slider--is-visible"),$("body").addClass("modal-visible"),refreshCart(!0),refreshCartFees()):($(".cart-slider").removeClass("cart-slider--is-visible"),$("body").removeClass("modal-visible"),setTimeout((function(){$("[data-view=cart-items]").html("")}),1e3)))}function scrollCartSliderToBottom(){setTimeout((function(){$("[data-view=cart-items]").scrollTop(999999)}),250)}window.displayCartCount=!1;var isDeletingItems=[];function cartSliderFormSubmit(e,t,r){e.preventDefault();var a=$(t).parent(),s=a[0].action,i=a.serializeArray(),n="BUTTON"==t.nodeName;i.find((function(e){return"qty"===e.name}))&&0===parseInt(i.find((function(e){return"qty"===e.name})).value)&&(n=!0);var o=isDeletingItems.indexOf(s);if(n){if(o>-1)return;isDeletingItems.push(s)}$.ajax({type:a[0].method,url:s,data:i,success:function(e){var t=isDeletingItems.indexOf(s);if(n&&t>-1&&isDeletingItems.splice(t,1),n&&refreshCart(!1),e.pickup.display_cart_shipping_calculator){var a=e.pickup.delivery_fee_cap>0?(e.pickup.delivery_fee_cap/100).toLocaleString("en-US",{style:"currency",currency:"USD"}):"Free";if($(".order__delivery_threshold_difference .fee").html(a),$(".order__delivery_threshold_difference-met .fee").html(a),e.pickup.delivery_total_threshold>e.subtotal){var i=((e.pickup.delivery_total_threshold-e.subtotal)/100).toLocaleString("en-US",{style:"currency",currency:"USD"});$(".order__delivery_threshold_difference").addClass("show"),$(".order__delivery_threshold_difference-met").removeClass("show"),$(".order__delivery_threshold_difference .value").html(i)}else $(".order__delivery_threshold_difference").removeClass("show"),$(".order__delivery_threshold_difference-met").addClass("show")}if(displayCartCount){for(var o=0,l=0,d=e.items.length;l<d;l++)o+=e.items[l].qty;$(".order__total").html(o)}else $(".order__total").html(e.subtotal_formatted);refreshCartSummary(),refreshCartFees(),refreshCart(!1,r)}})}function selectOrderScheduleType(e,t){var r=document.getElementById("csrfToken").content;$.ajax({type:"PUT",url:"/order",data:{_token:r,placement_type:e},success:function(e){refreshCart(!1),refreshCartFees(),t&&window.location.reload()},error:function(e){if(Array.isArray(e.responseJSON.excluded)){var t=e.responseJSON.message;alert(t+": "+e.responseJSON.excluded)}}})}function submitForm(e){var t=$(e),r=t.find('input[name="_method"]').val()||"POST",a=t.prop("action"),s=t.find("button[type=submit], input[type=submit]"),i=s.html();s.html('<span class="hidden-xs">Saving...</span> <i class="fa fa-circle-o-notch fa-spin"></i>'),s.prop("disabled","disabled");var n=t.data("view-target");n&&t.append('<input type="hidden" name="render_view" value="'+n+'" />'),t.find("input").prop("readonly","readonly"),$.ajax({type:r,url:a,data:t.serialize(),success:function(e,r,a){var o=a.getResponseHeader("content-type")||"";if(n&&o.indexOf("html")>-1){var l=$("[data-view="+n+"]");l&&l.html(e)}t.find("input").removeAttr("readonly"),s.html(i),s.removeAttr("disabled")},error:function(e){e.responseText&&alert(e.responseText.replace(/(\r\n|\n|\r|\t|\")/gm,"")),t.find("input").removeAttr("readonly"),s.html(i),s.removeAttr("disabled")}})}$(".js-show-cart-slider").on("click",(function(e){$(".cart-slider").length>0&&(e.stopPropagation(),e.preventDefault(),showCartSlider(!0))})),$(".js-cart-close").on("click",(function(e){e.stopPropagation(),showCartSlider(!1)})),$(".cart-slider__container").on("click",(function(e){e.stopPropagation()})),$("form[data-cart]").on("submit",(function(e){e.preventDefault();var t=$(this),r=t.find('input[name="_method"]').val()||"POST",a=t.prop("action"),s=t.find("button[type=submit], input[type=submit]"),i=s.html();s.html('<span class="hidden-xs">Adding</span> <i class="fa fa-circle-o-notch fa-spin"></i>'),s.prop("disabled","disabled"),$.ajax({type:r,url:a,data:t.serialize(),success:function(e){if(displayCartCount){for(var t=0,r=0,a=e.items.length;r<a;r++)t+=e.items[r].qty;$(".order__total").html(t)}else $(".order__total").html(e.orderSubtotal);s.html('<span class="hidden-xs">Added</span> <i class="fa fa-check"></i>'),"undefined"!=typeof fbq&&fbq("track","AddToCart",{content_type:"product",content_ids:[e.productId],content_name:e.productName,value:e.productPrice*parseInt(e.productQty),currency:"USD"}),showCartSlider(!0),setTimeout((function(){s.html(i),s.removeAttr("disabled")}),700)},error:function(e){if(s.html(i),s.removeAttr("disabled"),e.status>=500)return alert("There are a problem processing this request. Please try again later.");if(422===e.status){var t=e.responseJSON.errors||null;if(t)Object.keys(t).forEach((function(e){t[e].forEach((function(e){return"string"==typeof e?alert(e):console.log(e)}))}));return!1}var r=e.responseText.trim();alert(r)}})})),$("[data-menu]").on("click",(function(e){$(this).data("keep-open")&&sessionStorage.setItem("lastOpenedMenu",$(this).data("menu"))})),$(document).on("ready",(function(){var e=$('[data-menu="'+sessionStorage.getItem("lastOpenedMenu")+'"]');e.data("keep-open")&&e.parent("li").addClass("open")})),$("form[data-ajax-form]").on("submit",(function(e){e.preventDefault(),submitForm(this)}));
